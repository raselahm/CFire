{"ast":null,"code":"var _jsxFileName = \"D:\\\\School\\\\sprint-4\\\\src\\\\Component\\\\Login-Register\\\\LoginForm.js\";\nimport React from \"react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport './LoginPage.css';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.change = e => {\n      this.setState({\n        // change function used to change the state of the Component\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.validate = () => {\n      let emailError = \"\";\n      let passwordError = \"\";\n\n      if (!this.state.email.includes('@')) {\n        emailError = 'invalid email';\n      }\n\n      if (this.state.email.length === \"\") {\n        emailError = 'cannot leave blank';\n      }\n\n      if (this.state.password === \"\") {\n        passwordError = 'cannot leave password blank';\n      }\n\n      if (emailError || passwordError) {\n        this.setState({\n          emailError\n        });\n        this.setState({\n          passwordError\n        });\n        return false;\n      }\n\n      return true;\n    };\n\n    this.submitHandler = event => {\n      //keep the form from actually submitting\n      event.preventDefault();\n      const isValid = this.validate();\n\n      if (isValid) {\n        //make the api call to the authentication page\n        fetch(\"http://stark.cse.buffalo.edu/cse410/blackhole/api/SocialAuth.php\", {\n          method: \"post\",\n          body: JSON.stringify({\n            action: \"login\",\n            username: this.state.email,\n            password: this.state.password\n          })\n        }).then(res => res.json()).then(result => {\n          console.log(\"Testing\");\n\n          if (result.user) {\n            sessionStorage.setItem(\"token\", result.user.session_token);\n            sessionStorage.setItem(\"user\", result.user.user_id);\n            sessionStorage.setItem(\"username\", this.state.email);\n            this.setState({\n              sessiontoken: result.user.session_token,\n              alanmessage: result.user.session_token\n            });\n            this.props.history.push('/Homepage');\n          } else {\n            sessionStorage.removeItem(\"token\");\n            sessionStorage.removeItem(\"user\");\n            this.setState({\n              sessiontoken: \"\",\n              alanmessage: result.message\n            });\n          }\n        }, error => {\n          alert(\"error!\");\n        });\n        this.setState({\n          email: \"\",\n          password: \"\"\n        });\n      }\n    };\n\n    this.state = {\n      email: \"\",\n      password: \"\",\n      alanmessage: \"\",\n      sessiontoken: \"\"\n    };\n  }\n\n  render() {\n    //   if (!sessionStorage.getItem(\"token\")) {\n    console.log(\"Rendering login, token is \" + sessionStorage.getItem(\"token\"));\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"loginForm\",\n      onSubmit: this.submitHandler,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      className: \"loginInput\",\n      type: \"text\",\n      name: \"email\",\n      placeholder: \"Email\",\n      onChange: this.change,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"loginInput\",\n      type: \"password\",\n      name: \"password\",\n      placeholder: \"Password\",\n      onChange: this.change,\n      required: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"buttons\",\n      type: \"submit\",\n      value: \"Login\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, this.state.alanmessage), /*#__PURE__*/React.createElement(Link, {\n      to: \"../Registration\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 40\n      }\n    }, \"Register\"))); //   } else {\n    //     console.log(\"Returning welcome message\");\n    //       return(\n    //           <div>\n    //           <p>{this.state.alanmessage} </p>\n    //           <Link to = '../Homepage'><button className = \"buttons\">Homepage</button></Link>\n    //         </div>\n    //         );\n    //   }\n  }\n\n}\n\nexport default withRouter(LoginForm);","map":{"version":3,"sources":["D:/School/sprint-4/src/Component/Login-Register/LoginForm.js"],"names":["React","Link","withRouter","LoginForm","Component","constructor","props","change","e","setState","target","name","value","validate","emailError","passwordError","state","email","includes","length","password","submitHandler","event","preventDefault","isValid","fetch","method","body","JSON","stringify","action","username","then","res","json","result","console","log","user","sessionStorage","setItem","session_token","user_id","sessiontoken","alanmessage","history","push","removeItem","message","error","alert","render","getItem"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport './LoginPage.css'\r\n\r\n\r\nclass LoginForm extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      email: \"\",\r\n      password: \"\",\r\n      alanmessage: \"\",\r\n      sessiontoken: \"\"\r\n    };\r\n  }\r\n\r\n  change = e => {\r\n    this.setState({         // change function used to change the state of the Component\r\n      [e.target.name]:    \r\n      e.target.value});\r\n  };\r\n\r\n  validate = () => {\r\n    let emailError = \"\"; \r\n    let passwordError = \"\";\r\n\r\n\r\n    if(!this.state.email.includes('@')){\r\n        emailError = 'invalid email';\r\n    }\r\n\r\n    if(this.state.email.length === \"\"){\r\n       emailError = 'cannot leave blank'; \r\n    }\r\n    \r\n    \r\n    if(this.state.password === \"\"){\r\n        passwordError = 'cannot leave password blank';\r\n    }\r\n    \r\n\r\n    if(emailError || passwordError){\r\n        this.setState({emailError});\r\n        this.setState({passwordError});\r\n        return false;\r\n    }\r\n\r\n   return true;\r\n\r\n}\r\n  \r\n\r\n\r\n  submitHandler = event => {\r\n    //keep the form from actually submitting\r\n    event.preventDefault();\r\n\r\n    const isValid = this.validate();\r\n\r\n    if(isValid){\r\n      //make the api call to the authentication page\r\n      fetch(\"http://stark.cse.buffalo.edu/cse410/blackhole/api/SocialAuth.php\", {\r\n          method: \"post\",\r\n          body: JSON.stringify({\r\n            action: \"login\",\r\n            username: this.state.email,\r\n            password: this.state.password\r\n          })\r\n        })\r\n        .then(res => res.json())\r\n        .then(\r\n          result => {\r\n            console.log(\"Testing\");\r\n            if (result.user) {\r\n              sessionStorage.setItem(\"token\", result.user.session_token);\r\n              sessionStorage.setItem(\"user\", result.user.user_id);\r\n              sessionStorage.setItem(\"username\", this.state.email);\r\n\r\n              this.setState({\r\n                sessiontoken: result.user.session_token,\r\n                alanmessage: result.user.session_token\r\n              });\r\n              this.props.history.push('/Homepage');\r\n            } else {\r\n              sessionStorage.removeItem(\"token\");\r\n              sessionStorage.removeItem(\"user\");\r\n              this.setState({\r\n                sessiontoken: \"\",\r\n                alanmessage: result.message\r\n              });\r\n            }\r\n\r\n          },\r\n          error => {\r\n            alert(\"error!\");\r\n          }\r\n        );\r\n        this.setState({\r\n          email: \"\",\r\n          password: \"\"\r\n        });\r\n    }\r\n  };\r\n\r\n  render() {\r\n  //   if (!sessionStorage.getItem(\"token\")) {\r\n    console.log(\"Rendering login, token is \" + sessionStorage.getItem(\"token\"));\r\n    \r\n      return (\r\n        <form className = \"loginForm\" onSubmit={this.submitHandler}>\r\n          \r\n            <input className = \"loginInput\"\r\n            type=\"text\" \r\n            name = \"email\"\r\n            placeholder = \"Email\"\r\n            onChange={this.change} \r\n            required\r\n            />\r\n          <br />\r\n            <input className = \"loginInput\"\r\n            type=\"password\" \r\n            name = \"password\"\r\n            placeholder = \"Password\"\r\n            onChange={this.change} \r\n            required\r\n            />\r\n          <input className = \"buttons\" type=\"submit\" value=\"Login\"/>\r\n          <p>{this.state.alanmessage}</p>\r\n          <Link to = '../Registration'><button className = \"buttons\">Register</button></Link>\r\n        </form>\r\n      );\r\n  //   } else {\r\n  //     console.log(\"Returning welcome message\");\r\n\r\n  //       return(\r\n  //           <div>\r\n  //           <p>{this.state.alanmessage} </p>\r\n  //           <Link to = '../Homepage'><button className = \"buttons\">Homepage</button></Link>\r\n  //         </div>\r\n  //         );\r\n      \r\n  //   }\r\n  }\r\n}\r\n\r\nexport default withRouter(LoginForm)"]},"metadata":{},"sourceType":"module"}