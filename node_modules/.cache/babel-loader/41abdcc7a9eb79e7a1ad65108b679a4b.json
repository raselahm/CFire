{"ast":null,"code":"var _jsxFileName = \"D:\\\\School\\\\sprint-4\\\\src\\\\Component\\\\Profile\\\\Profile.js\";\nimport React from \"react\";\nimport \"./Profile.css\";\nimport Navbar from \"../NavBar/Navbar\";\nimport ProfileHeader from \"./ProfileHeader\";\nimport ProfileSettings from \"./ProfileSettings\";\nimport { Link } from \"react-router-dom\";\nimport ProfilePage from \"./ProfilePage\";\nimport { withRouter } from 'react-router-dom';\n\nclass Profile extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.followUser = e => {\n      e.preventDefault();\n      fetch(\"http://stark.cse.buffalo.edu//cse410/blackhole/api/connectioncontroller.php\", {\n        method: \"post\",\n        body: JSON.stringify({\n          action: \"addOrEditConnections\",\n          userid: sessionStorage.getItem(\"user\"),\n          session_token: sessionStorage.getItem(\"token\"),\n          connectuserid: this.props.location.profileProps.userid,\n          user_id: sessionStorage.getItem(\"user\"),\n          connectiontype: \"Follower\",\n          connectionstatus: \"Following\"\n        })\n      }).then(res => res.json()).then(results => {\n        this.setState({\n          isFollowing: true\n        });\n        this.getFollowers();\n        this.isFollowing();\n      }, error => {\n        this.setState({\n          error\n        });\n      });\n    };\n\n    this.unFollowUser = e => {\n      e.preventDefault();\n      fetch(\"http://stark.cse.buffalo.edu//cse410/blackhole/api/connectioncontroller.php\", {\n        method: \"post\",\n        body: JSON.stringify({\n          action: \"addOrEditConnections\",\n          userid: sessionStorage.getItem(\"user\"),\n          session_token: sessionStorage.getItem(\"token\"),\n          user_id: sessionStorage.getItem(\"user\"),\n          connectionstatus: \"unFollow\",\n          connectionid: this.state.connectionid\n        })\n      }).then(res => res.json()).then(results => {\n        if (results) {\n          this.setState({\n            isFollowing: false\n          });\n          this.getFollowers();\n        }\n      }, error => {\n        this.setState({\n          error\n        });\n      });\n    };\n\n    this.toProfile = () => {\n      this.setState({\n        footer: 0\n      });\n    };\n\n    this.toSettings = () => {\n      this.setState({\n        footer: 3\n      });\n    };\n\n    this.state = {\n      name: \"\",\n      username: \"\",\n      user_id: \"\",\n      followers: [],\n      footer: 0,\n      connectionid: \"\",\n      isFollowing: false\n    };\n    this.getusername();\n    this.isFollowing();\n    this.getFollowers();\n  } //API Call to get user-information from user_id, based off the session storage\n\n\n  getusername() {\n    fetch(\"http://stark.cse.buffalo.edu//cse410/blackhole/api/usercontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getUsers\",\n        userid: this.props.location.profileProps.userid\n      })\n    }).then(res => res.json()).then(results => {\n      if (results.users) {\n        this.setState({\n          username: results.users[0].username\n        });\n      }\n    }, error => {\n      this.setState({\n        error\n      });\n    });\n  }\n\n  getFollowers() {\n    fetch(\"http://stark.cse.buffalo.edu//cse410/blackhole/api/connectioncontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getConnections\",\n        connectiontype: \"Follower\",\n        connectiontstatus: \"Following\",\n        connectuserid: this.props.location.profileProps.userid\n      })\n    }).then(res => res.json()).then(results => {\n      if (results.connections) {\n        this.setState({\n          followers: results.connections\n        });\n      } else {\n        this.setState({\n          followers: []\n        });\n      }\n    }, error => {\n      this.setState({\n        error\n      });\n    });\n  }\n\n  isFollowing() {\n    fetch(\"http://stark.cse.buffalo.edu//cse410/blackhole/api/connectioncontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getConnections\",\n        userid: sessionStorage.getItem(\"user\"),\n        connectiontype: \"Follower\",\n        connectuserid: this.props.location.profileProps.userid\n      })\n    }).then(res => res.json()).then(results => {\n      if (results.connections && results.connections[0].connection_status === \"Following\") {\n        console.log(results.connections[0].connection_status);\n        this.setState({\n          isFollowing: true,\n          connectionid: results.connections[0].connection_id\n        });\n      } else if (results.connections && results.connections[0].connection_status === \"unFollow\") {\n        this.setState({\n          isFollowing: false\n        });\n      }\n    }, error => {\n      this.setState({\n        error\n      });\n    });\n  }\n\n  loadPictures() {\n    fetch(\"http://stark.cse.buffalo.edu/cse410/blackhole/api/uacontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        user_id: this.state.userid,\n        action: \"getUserArtifacts\",\n        artifacttype: \"\",\n        artifactcategory: \"profilePicture\"\n      })\n    }).then(res => res.json()).then(result => {\n      if (result.userArtifacts) {\n        this.setState({\n          isLoaded: true,\n          picture: result.userArtifacts\n        });\n      }\n    }, error => {\n      this.setState({\n        isLoaded: false\n      });\n    });\n  }\n\n  toFooter() {\n    var temp = this.state.footer;\n\n    if (temp === 0) {\n      return /*#__PURE__*/React.createElement(ProfilePage, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 21\n        }\n      });\n    }\n\n    if (temp === 3) {\n      return /*#__PURE__*/React.createElement(ProfileSettings, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 21\n        }\n      });\n    }\n  }\n\n  displaySettings() {\n    if (sessionStorage.getItem(\"user\") === this.props.location.profileProps.userid) {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: \"profile-tabs\",\n        onClick: this.toSettings,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 17\n        }\n      }, \"Settings\");\n    } else {\n      console.log(\"HELLO\");\n    }\n  }\n\n  displayFollowButton() {\n    if (this.state.isFollowing) {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        className: \"profile-button-following\",\n        onClick: this.unFollowUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 17\n        }\n      }, \"Following\");\n    } else {\n      return /*#__PURE__*/React.createElement(\"button\", {\n        className: \"profile-button\",\n        onClick: this.followUser,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 17\n        }\n      }, \"Follow\");\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-page-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-pic-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"profile-pic\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 29\n      }\n    }, this.state.followers.length)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"profile-name-h1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 29\n      }\n    }, this.state.username), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 29\n      }\n    }, this.displayFollowButton(), /*#__PURE__*/React.createElement(Link, {\n      to: \"/MessagePage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"profile-button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 37\n      }\n    }, \"Message\"))))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"nav\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"profile-labels\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"li\", {\n      className: \"profile-tabs\",\n      onClick: this.toProfile,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 33\n      }\n    }, \"Profile\"), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"profile-tabs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 33\n      }\n    }, \"Groups\"), /*#__PURE__*/React.createElement(\"li\", {\n      className: \"profile-tabs\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 293,\n        columnNumber: 33\n      }\n    }, \"Projects\"), this.displaySettings()))), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"profile-divider\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 21\n      }\n    }, \" \")), this.toFooter());\n  }\n\n}\n\nexport default withRouter(Profile);","map":{"version":3,"sources":["D:/School/sprint-4/src/Component/Profile/Profile.js"],"names":["React","Navbar","ProfileHeader","ProfileSettings","Link","ProfilePage","withRouter","Profile","Component","constructor","props","followUser","e","preventDefault","fetch","method","body","JSON","stringify","action","userid","sessionStorage","getItem","session_token","connectuserid","location","profileProps","user_id","connectiontype","connectionstatus","then","res","json","results","setState","isFollowing","getFollowers","error","unFollowUser","connectionid","state","toProfile","footer","toSettings","name","username","followers","getusername","users","connectiontstatus","connections","connection_status","console","log","connection_id","loadPictures","artifacttype","artifactcategory","result","userArtifacts","isLoaded","picture","toFooter","temp","displaySettings","displayFollowButton","render","length"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./Profile.css\";\r\nimport Navbar from \"../NavBar/Navbar\";\r\nimport ProfileHeader from \"./ProfileHeader\";\r\nimport ProfileSettings from \"./ProfileSettings\";\r\nimport {Link} from \"react-router-dom\";\r\nimport ProfilePage from \"./ProfilePage\";\r\nimport {withRouter} from 'react-router-dom'\r\n\r\n\r\nclass Profile extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            name: \"\",\r\n            username: \"\",\r\n            user_id: \"\",\r\n            followers: [],\r\n            footer: 0,\r\n            connectionid:\"\",\r\n            isFollowing: false\r\n        };\r\n        this.getusername();\r\n        this.isFollowing();\r\n        this.getFollowers();\r\n    }\r\n\r\n\r\n    //API Call to get user-information from user_id, based off the session storage\r\n    getusername() {\r\n        fetch(\"http://stark.cse.buffalo.edu//cse410/blackhole/api/usercontroller.php\", {\r\n            method: \"post\",\r\n            body: JSON.stringify({\r\n                action: \"getUsers\",\r\n                userid: this.props.location.profileProps.userid\r\n            })\r\n        }).then(res => res.json())\r\n            .then(\r\n                (results) => {\r\n                    if (results.users) {\r\n                        this.setState({\r\n                            username: results.users[0].username\r\n                        });\r\n                    }\r\n                },\r\n                error => {\r\n                    this.setState({\r\n                        error\r\n                    });\r\n                }\r\n            )\r\n    }\r\n\r\n    getFollowers() {\r\n        fetch(\"http://stark.cse.buffalo.edu//cse410/blackhole/api/connectioncontroller.php\", {\r\n            method: \"post\",\r\n            body: JSON.stringify({\r\n                action: \"getConnections\",\r\n                connectiontype: \"Follower\",\r\n                connectiontstatus:\"Following\",\r\n                connectuserid: this.props.location.profileProps.userid\r\n\r\n\r\n            })\r\n        }).then(res => res.json())\r\n            .then(\r\n                (results) => {\r\n                    if (results.connections) {\r\n                        this.setState({\r\n                            followers: results.connections\r\n                        });\r\n                    } else {\r\n                        this.setState({\r\n                            followers: []\r\n                        })\r\n                    }\r\n                },\r\n                error => {\r\n                    this.setState({\r\n                        error\r\n                    });\r\n                }\r\n            )\r\n    }\r\n\r\n    isFollowing() {\r\n        fetch(\"http://stark.cse.buffalo.edu//cse410/blackhole/api/connectioncontroller.php\", {\r\n            method: \"post\",\r\n            body: JSON.stringify({\r\n                action: \"getConnections\",\r\n                userid: sessionStorage.getItem(\"user\"),\r\n                connectiontype: \"Follower\",\r\n                connectuserid: this.props.location.profileProps.userid\r\n\r\n\r\n            })\r\n        }).then(res => res.json())\r\n            .then(\r\n                (results) => {\r\n                    if (results.connections && results.connections[0].connection_status === \"Following\") {\r\n                        console.log(results.connections[0].connection_status);\r\n\r\n                        this.setState({\r\n                            isFollowing: true,\r\n                            connectionid: results.connections[0].connection_id\r\n\r\n                        });\r\n                    }else if (results.connections && results.connections[0].connection_status === \"unFollow\") {\r\n                        this.setState({\r\n                            isFollowing: false\r\n                        })\r\n                    }\r\n                },\r\n                error => {\r\n                    this.setState({\r\n                        error\r\n                    });\r\n                }\r\n            )\r\n    }\r\n\r\n    followUser = e => {\r\n        e.preventDefault();\r\n        fetch(\"http://stark.cse.buffalo.edu//cse410/blackhole/api/connectioncontroller.php\", {\r\n            method: \"post\",\r\n            body: JSON.stringify({\r\n                action: \"addOrEditConnections\",\r\n                userid: sessionStorage.getItem(\"user\"),\r\n                session_token: sessionStorage.getItem(\"token\"),\r\n                connectuserid: this.props.location.profileProps.userid,\r\n                user_id: sessionStorage.getItem(\"user\"),\r\n                connectiontype: \"Follower\",\r\n                connectionstatus: \"Following\"\r\n\r\n\r\n            })\r\n        }).then(res => res.json())\r\n            .then(\r\n                (results) => {\r\n                        this.setState({\r\n                            isFollowing: true,\r\n\r\n                        });\r\n                    this.getFollowers();\r\n                    this.isFollowing();\r\n                },\r\n                error => {\r\n                    this.setState({\r\n                        error\r\n                    });\r\n                }\r\n            )\r\n    }\r\n\r\n    unFollowUser = e => {\r\n        e.preventDefault();\r\n        fetch(\"http://stark.cse.buffalo.edu//cse410/blackhole/api/connectioncontroller.php\", {\r\n            method: \"post\",\r\n            body: JSON.stringify({\r\n                action: \"addOrEditConnections\",\r\n                userid: sessionStorage.getItem(\"user\"),\r\n                session_token: sessionStorage.getItem(\"token\"),\r\n                user_id: sessionStorage.getItem(\"user\"),\r\n                connectionstatus: \"unFollow\",\r\n                connectionid: this.state.connectionid\r\n\r\n            })\r\n        }).then(res => res.json())\r\n            .then(\r\n                (results) => {\r\n                    if (results) {\r\n                        this.setState({\r\n                            isFollowing: false\r\n                        });\r\n                        this.getFollowers();\r\n\r\n                    }\r\n                },\r\n                error => {\r\n                    this.setState({\r\n                        error\r\n                    });\r\n                }\r\n            )\r\n    }\r\n\r\n    loadPictures() {\r\n        fetch(\"http://stark.cse.buffalo.edu/cse410/blackhole/api/uacontroller.php\", {\r\n            method: \"post\",\r\n            body: JSON.stringify({\r\n                user_id: this.state.userid,\r\n                action: \"getUserArtifacts\",\r\n                artifacttype: \"\",\r\n                artifactcategory: \"profilePicture\"\r\n            })\r\n        })\r\n\r\n            .then(res => res.json())\r\n            .then(\r\n                result => {\r\n                    if (result.userArtifacts) {\r\n                        this.setState({\r\n                            isLoaded: true,\r\n                            picture: result.userArtifacts\r\n                        });\r\n                    }\r\n                },\r\n                error => {\r\n                    this.setState({\r\n                        isLoaded: false,\r\n\r\n                    });\r\n                }\r\n            );\r\n    }\r\n\r\n\r\n    toProfile = () => {\r\n        this.setState({\r\n            footer: 0\r\n        });\r\n    };\r\n\r\n    toSettings = () => {\r\n        this.setState({\r\n            footer: 3\r\n        });\r\n    };\r\n\r\n    toFooter() {\r\n        var temp = this.state.footer;\r\n        if (temp === 0) {\r\n            return (<ProfilePage/>);\r\n        }\r\n        if (temp === 3) {\r\n            return (<ProfileSettings/>);\r\n        }\r\n    }\r\n\r\n\r\n    displaySettings() {\r\n        if (sessionStorage.getItem(\"user\") === this.props.location.profileProps.userid) {\r\n            return (\r\n                <li className=\"profile-tabs\" onClick={this.toSettings}>Settings</li>\r\n\r\n            );\r\n        } else {\r\n            console.log(\"HELLO\")\r\n        }\r\n    }\r\n\r\n    displayFollowButton() {\r\n        if (this.state.isFollowing) {\r\n            return(\r\n                <button className=\"profile-button-following\" onClick={this.unFollowUser}>Following</button>\r\n            )\r\n        } else {\r\n            return(\r\n                <button className=\"profile-button\" onClick={this.followUser}>Follow</button>\r\n            )\r\n        }\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"profile-page-container\">\r\n                <Navbar/>\r\n                <div className=\"profile-container\">\r\n                    <div className=\"profile-header\">\r\n                        <div className=\"profile-pic-group\">\r\n                            <span className=\"profile-pic\"/>\r\n                            <p>{this.state.followers.length}</p>\r\n                        </div>\r\n                        <div className=\"profile-name\">\r\n                            <h1 className=\"profile-name-h1\">{this.state.username}</h1>\r\n                            <div className=\"profile-buttons\">\r\n                                {this.displayFollowButton()}\r\n                                <Link to='/MessagePage'>\r\n                                    <button className=\"profile-button\">Message</button>\r\n                                </Link>\r\n                            </div>\r\n                        </div>\r\n\r\n                    </div>\r\n                    <div>\r\n                        <nav>\r\n                            <ul className=\"profile-labels\">\r\n\r\n                                <li className=\"profile-tabs\" onClick={this.toProfile}>Profile</li>\r\n                                <li className=\"profile-tabs\">Groups</li>\r\n                                <li className=\"profile-tabs\">Projects</li>\r\n                                {this.displaySettings()}\r\n\r\n                            </ul>\r\n                        </nav>\r\n                    </div>\r\n                    <span className=\"profile-divider\"> </span>\r\n                </div>\r\n                {this.toFooter()}\r\n\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(Profile);\r\n"]},"metadata":{},"sourceType":"module"}