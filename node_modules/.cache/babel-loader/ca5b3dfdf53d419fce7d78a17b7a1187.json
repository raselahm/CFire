{"ast":null,"code":"var _jsxFileName = \"/Users/waseehaque/Codes/CS Projects/black-hole-industries/src/Component/PostPreview.js\";\nimport React from \"react\";\nimport \"../Homepage.css\";\n\nclass PostPreview extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.likePost = event => {\n      if (!this.state.userLiked) {\n        event.preventDefault();\n        console.log(\"SALJDLFJSDLKFJSDF\" + this.props.post.post_id);\n        fetch(\"http://stark.cse.buffalo.edu/cse410/blackhole/api/ptcontroller.php\", {\n          method: \"post\",\n          body: JSON.stringify({\n            action: \"addOrEditPostTags\",\n            user_id: sessionStorage.getItem(\"user\"),\n            session_token: sessionStorage.getItem(\"token\"),\n            userid: sessionStorage.getItem(\"user\"),\n            tag: \"test2\",\n            postid: this.props.post.post_id\n          })\n        }).then(res => res.json()).then(result => {\n          if (result.Status) {\n            this.loadLikes();\n            this.setState({\n              isLoaded: true,\n              displayedLike: \"https://i7.uihere.com/icons/237/974/400/upvote-7ccac87c950ed5a8ce2f412f29940d33.png\"\n            });\n          }\n        }, error => {\n          this.setState({\n            isLoaded: true,\n            error\n          });\n        });\n      } else {\n        this.conditionalDisplay();\n      }\n    };\n\n    this.state = {\n      userLiked: false,\n      displayedLike: \"https://i7.uihere.com/icons/998/832/946/upvote-9fbfa83dcbcc4553543fbbcee0c4e206.png\",\n      likes: []\n    };\n    this.loadLikes();\n  }\n\n  loadLikes() {\n    console.log(\"ID\" + this.props.post.post_id);\n    fetch(\"http://stark.cse.buffalo.edu/cse410/blackhole/api/ptcontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getPostTags\",\n        postid: this.props.post.post_id,\n        tag: \"test2\"\n      })\n    }).then(res => res.json()).then(result => {\n      console.log(result);\n\n      if (result.post_tags) {\n        console.log(\"IM LOST\");\n        this.setState({\n          isLoaded: true,\n          likes: result.post_tags\n        });\n      }\n    }, error => {\n      this.setState({\n        isLoaded: true,\n        error\n      });\n    });\n    fetch(\"http://stark.cse.buffalo.edu/cse410/blackhole/api/ptcontroller.php\", {\n      method: \"post\",\n      body: JSON.stringify({\n        action: \"getPostTags\",\n        postid: this.props.post.post_id,\n        tag: \"test2\",\n        userid: sessionStorage.getItem(\"user\")\n      })\n    }).then(res => res.json()).then(result => {\n      if (result.post_tags !== undefined) {\n        console.log(\"IM LOST\");\n        console.log(result.post_tags);\n        this.setState({\n          userLiked: true,\n          displayedLike: \"https://i7.uihere.com/icons/237/974/400/upvote-7ccac87c950ed5a8ce2f412f29940d33.png\"\n        });\n      }\n    }, error => {\n      this.setState({\n        isLoaded: true,\n        error\n      });\n    });\n  }\n\n  conditionalDisplay() {\n    if (this.state.displayedLike === \"https://i7.uihere.com/icons/998/832/946/upvote-9fbfa83dcbcc4553543fbbcee0c4e206.png\") {\n      this.setState({\n        displayedLike: \"https://i7.uihere.com/icons/237/974/400/upvote-7ccac87c950ed5a8ce2f412f29940d33.png\"\n      });\n    } else {\n      this.setState({\n        displayedLike: \"https://i7.uihere.com/icons/998/832/946/upvote-9fbfa83dcbcc4553543fbbcee0c4e206.png\"\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"post-preview-main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148\n      },\n      __self: this\n    }, this.props.post.post_text, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, this.state.likes.length), React.createElement(\"img\", {\n      className: \"like\",\n      src: this.state.displayedLike,\n      onClick: this.likePost,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default PostPreview;","map":{"version":3,"sources":["/Users/waseehaque/Codes/CS Projects/black-hole-industries/src/Component/PostPreview.js"],"names":["React","PostPreview","Component","constructor","props","likePost","event","state","userLiked","preventDefault","console","log","post","post_id","fetch","method","body","JSON","stringify","action","user_id","sessionStorage","getItem","session_token","userid","tag","postid","then","res","json","result","Status","loadLikes","setState","isLoaded","displayedLike","error","conditionalDisplay","likes","post_tags","undefined","render","post_text","length"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"../Homepage.css\";\n\nclass PostPreview extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            userLiked: false,\n            displayedLike: \"https://i7.uihere.com/icons/998/832/946/upvote-9fbfa83dcbcc4553543fbbcee0c4e206.png\",\n            likes: []\n\n        };\n        this.loadLikes();\n    }\n\n    loadLikes() {\n        console.log(\"ID\" + this.props.post.post_id);\n        fetch(\"http://stark.cse.buffalo.edu/cse410/blackhole/api/ptcontroller.php\", {\n            method: \"post\",\n            body: JSON.stringify({\n                action: \"getPostTags\",\n                postid: this.props.post.post_id,\n                tag: \"test2\"\n\n\n            })\n        })\n            .then(res => res.json())\n            .then(\n                result => {\n\n                    console.log(result);\n                    if (result.post_tags) {\n                        console.log(\"IM LOST\")\n                        this.setState({\n                            isLoaded: true,\n\n                            likes: result.post_tags\n\n                        });\n                    }\n                },\n                error => {\n                    this.setState({\n                        isLoaded: true,\n                        error\n                    });\n                }\n            );\n\n        fetch(\"http://stark.cse.buffalo.edu/cse410/blackhole/api/ptcontroller.php\", {\n            method: \"post\",\n            body: JSON.stringify({\n                action: \"getPostTags\",\n                postid: this.props.post.post_id,\n                tag: \"test2\",\n                userid: sessionStorage.getItem(\"user\")\n\n\n            })\n        })\n            .then(res => res.json())\n            .then(\n                result => {\n\n                    if (result.post_tags !== undefined) {\n                        console.log(\"IM LOST\")\n                        console.log(result.post_tags);\n                        this.setState({\n                            userLiked: true,\n                            displayedLike: \"https://i7.uihere.com/icons/237/974/400/upvote-7ccac87c950ed5a8ce2f412f29940d33.png\"\n\n                        });\n                    }\n                },\n                error => {\n                    this.setState({\n                        isLoaded: true,\n                        error\n                    });\n                }\n            );\n\n\n    }\n\n\n    likePost = event => {\n        if(!this.state.userLiked) {\n            event.preventDefault();\n            console.log(\"SALJDLFJSDLKFJSDF\" + this.props.post.post_id);\n            fetch(\"http://stark.cse.buffalo.edu/cse410/blackhole/api/ptcontroller.php\", {\n                method: \"post\",\n                body: JSON.stringify({\n                    action: \"addOrEditPostTags\",\n                    user_id: sessionStorage.getItem(\"user\"),\n                    session_token: sessionStorage.getItem(\"token\"),\n                    userid: sessionStorage.getItem(\"user\"),\n                    tag: \"test2\",\n                    postid: this.props.post.post_id\n                })\n            })\n                .then(res => res.json())\n                .then(\n                    result => {\n                        if (result.Status) {\n                            this.loadLikes();\n                            this.setState({\n                                isLoaded: true,\n                                displayedLike: \"https://i7.uihere.com/icons/237/974/400/upvote-7ccac87c950ed5a8ce2f412f29940d33.png\"\n                            });\n                        }\n                    },\n                    error => {\n                        this.setState({\n                            isLoaded: true,\n                            error\n                        });\n                    }\n                );\n        } else{\n            this.conditionalDisplay()\n        }\n\n    };\n\n\n    conditionalDisplay(){\n        if(this.state.displayedLike === \"https://i7.uihere.com/icons/998/832/946/upvote-9fbfa83dcbcc4553543fbbcee0c4e206.png\"){\n            this.setState(\n                {\n                    displayedLike: \"https://i7.uihere.com/icons/237/974/400/upvote-7ccac87c950ed5a8ce2f412f29940d33.png\"\n                }\n            )\n        }else{\n            this.setState(\n                {\n                    displayedLike: \"https://i7.uihere.com/icons/998/832/946/upvote-9fbfa83dcbcc4553543fbbcee0c4e206.png\"\n                }\n            )\n        }\n    }\n\n\n\n    render() {\n        return (\n            <div className=\"post-preview-main\">\n                {this.props.post.post_text}\n\n                <p>{this.state.likes.length}</p>\n                <img className=\"like\"\n                     src={this.state.displayedLike}\n                     onClick={this.likePost}/>\n\n\n            </div>\n\n        );\n    }\n}\n\nexport default PostPreview;\n"]},"metadata":{},"sourceType":"module"}